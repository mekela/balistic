jQuery.fn.extend({autocompleteSearch:function(e){var o=this.closest("form"),t=this,i={};this.autocomplete({serviceUrl:o.data("autocompleteurl"),paramName:"queryString",params:i,noCache:!0,onSelect:function(i){e.submitOnSelect&&(t.val(i.value),o.find(".trigger").val("Autocomplete"),o.submit())},minChars:3})}});var Common={},blazy,newsToPersist=$(".content .more-news");if(newsToPersist.length)var sideBarFromTopOrigi=$(".content .more-news").offset().top,sideBarLimitFromTopEl=$(".content .more-news").parent().prev(),sideBarLimitFromTop=sideBarLimitFromTopEl.offset().top+sideBarLimitFromTopEl.outerHeight();Common.init=function(){this.checkContent(),this.simpleSelect(),this.CookieCheck(),$(".video-pod").fitVids(),$(".fit-vid").fitVids(),this.newsSquare(),this.ShareProductImagePodCheck(),$("html").hasClass("no-touch")&&Common.customSelect()};var cookies={set:function(e,o,t){var i=new Date;i.setDate(i.getDate()+t);var s=o+(null===t?"":"; expires="+i.toUTCString());document.cookie=e+"="+s+"; path=/"},get:function(e){var o,t,i,s=document.cookie.split(";");for(o=0;o<s.length;o++)if(t=s[o].substr(0,s[o].indexOf("=")),i=s[o].substr(s[o].indexOf("=")+1),t=t.replace(/^\s+|\s+$/g,""),t==e)return i},remove:function(e){document.cookie!=document.cookie?index=document.cookie.indexOf(e):index=-1,index==-1&&(document.cookie=e+"=GONEcbEndCookie; expires=Monday, 19-Aug-1996 05:00:00 GMT; path=/")}};Common.CookieCheck=function(){cookies.get("hide_cookie_bar")||($(".cookie-notification").show(),$("header.desktop, header.mobile").addClass("cookie-banner-visible"),$(".large-banner").addClass("cookie-show"))},Common.CloseCookie=function(){$(".cookie-notification").slideUp(300),cookies.set("hide_cookie_bar",1,30),$(".large-banner").removeClass("cookie-show"),$("header.desktop, header.mobile").removeClass("cookie-banner-visible")},Common.validateForm=function(){$("form").addTriggersToJqueryValidate().triggerElementValidationsOnFormValidation(),$("form").bind("formValidation",function(e,o,t){t||($(".form-error-message").show(),$(".submission-error-message").show())})},Common.signUpSubmit=function(e){var o=$(this);o.valid()&&(e.preventDefault(),$.ajax({url:o.prop("action"),method:"POST",data:o.serialize(),success:function(e){$("#signup").replaceWith(e).after(function(){$("#signup").removeAttr("data-index")})}}))},Common.sitewideEnquiry=function(e){var o=$(this).closest("form");o.valid()&&(e.preventDefault(),$.ajax({url:o.prop("action"),method:"POST",data:o.serialize(),success:function(e){var t=$(e).removeAttr("data-index");o.closest("#sitewideEnquiry").replaceWith(t)}}))},Common.bindings=function(){$(document).on("submit","#signup form",Common.signUpSubmit),$(document).on("submit","#sitewideEnquiry form",Common.sitewideEnquiry),$(".faq-title").on("click",function(){$(this).toggleClass("active"),$(this).next(".faq-content").slideToggle()}),$(".close").on("click",this.CloseCookie),$('form.search-form input[type="text"]').autocompleteSearch({submitOnSelect:!0}),$("select").on("change",function(){$(this).blur()}),$(".menu-icon").click(Common.mobileMenu),$(".mobile-navigation a.parent").on("click",Common.mobileSubNav),$("html").hasClass("no-touch")?($(document).on("click",".simpleSelect-box-wrapper",function(){var e=$(this).find("select");return!e.prop("disabled")&&($(".simpleSelect-box-wrapper").removeClass("open"),void Common.toggleDropDown($(this)))}),$(".custom-select").mouseleave(function(){$(".simpleSelect-box-wrapper").removeClass("open"),$(this).removeClass("open")}),$("*:not(.simpleSelect-box-wrapper)").on("click",function(){$(".simpleSelect-box-wrapper").removeClass("open")})):$("header nav a.parent").on("click",function(e){$(this).hasClass("clicked")?window.location.href=$(this).attr("href"):e.preventDefault(),$(this).toggleClass("clicked")});var e=/constructor/i.test(window.HTMLElement);e&&($("header.desktop .search-form input").on("focusin",function(){$(".simpleSelect-box-wrapper").css("opacity",0)}),$("header.desktop .search-form input").on("focusout",function(){$(".simpleSelect-box-wrapper").css("opacity",1)})),$("#languageSelector").on("change",Common.changeLanguage),$("body").on("contextmenu","img",function(e){return!1}),$(".search-icon").on("click",function(){$(".search-form").addClass("reveal"),$("body").addClass("nav-hovered"),$(".search-form input[type=text], .search-form input[type=search]").focus()}),$(".search-close").on("click",function(){$(".search-form").removeClass("reveal"),$("body").removeClass("nav-hovered"),$(".search-form input[type=text], .search-form input[type=search]").blur()}),$("header.desktop nav > ul > li > a").on("mouseover",function(){$(this).hasClass("parent")?$("body").addClass("nav-hovered"):$("body").removeClass("nav-hovered")}),$("header.desktop nav ul .sub, header.desktop").on("mouseleave",function(){$(".search-form").hasClass("reveal")||$("body").removeClass("nav-hovered")})},Common.simpleSelect=function(){$("select").edSelect()},Common.customSelect=function(){var e="",o="",t="",i={};$('<div class="custom-select"></div>').insertAfter(".simpleSelect-box-wrapper"),$("select").children("option").each(function(){e=$(this).text(),o=$(this).val(),i=$(this).parent().parent(),""!=o&&(t='<span data-value="'+o+'">'+e+"</span>",i.siblings(".custom-select").append(t))}),$(".custom-select span").on("click",Common.customSelectUpdate)},Common.customSelectUpdate=function(){var e=$(this).data("value"),o=$(this).parent().siblings().children("select"),t=$(this).parent().siblings(),i=$(this).parent().siblings().children(".simpleSelect-box").children(".box-value");o.val(e),i.html(e),Common.toggleDropDown(t),o.trigger("change")},Common.toggleDropDown=function(e){e.toggleClass("open");var o=e.children("select");o.focus()},Common.checkContent=function(){$("p").each(function(){var e=$(this);0===e.html().replace(/\s|&nbsp;/g,"").length&&e.remove()})},Common.equaliseHeights=function(e){var o=0;$(e).each(function(){var e=$(this).outerHeight();o=e>o?e:o}),$(e).outerHeight(o)},Common.floatImageClass=function(e){$(e).each(function(){var e=$(this).css("float");e.length>0&&$(this).addClass(e+"Float")})},Common.hideValign=function(){$(".valign").css("opacity","0")},Common.valign=function(){$(".valign").each(function(){$(this).animate({opacity:1})})},Common.PodValign=function(){$(".large-image-pod .valign, .video-pod .valign").each(function(){var e=($(this).parent().height(),$(this).outerHeight());$(this).css("top","50%"),$(this).css("margin-top","-"+e/2+"px"),$(this).animate({opacity:1})}),$(".large-image-pod.left .row .span5.valign").each(function(){$(this).innerHeight();$(this).css("top","20%"),$(this).css("margin-top","-0px"),$(this).animate({opacity:1})}),$(".large-image-pod.right .row .span5.valign").each(function(){$(this).innerHeight();$(this).css("top","20%"),$(this).css("margin-top","-0px"),$(this).animate({opacity:1})}),$(".large-image-pod.right.parallax .row .span5.valign").each(function(){$(this).innerHeight();$(this).css("top","20%"),$(this).css("margin-top","-0px"),$(this).animate({opacity:1})}),$(".large-image-pod  .row .span5.valign").last().each(function(){$(this).innerHeight();$(this).css("top","-10%"),$(this).css("margin-top","-0px"),$(this).animate({opacity:1})})},Common.BannerHeight=function(){if(!$(".large-banner").hasClass("single")){var e=$(window).height();e=.9*e+"px";var o=".large-banner, .large-banner, .large-banner .row, .large-banner div[class^=span]";$(o).css("height",e)}},Common.persistentNav=function(){if($("header.desktop").hasClass("cookie-banner-visible")){var e=$(".cookie-notification").outerHeight();$(window).scrollTop()>e?($("header.desktop, header.mobile").addClass("fixed"),$("header.mobile").css("top","0px")):$(window).scrollTop()<$(".cookie-notification").outerHeight()&&$("header.desktop").hasClass("fixed")&&$("header.desktop, header.mobile").removeClass("fixed")}else $(window).scrollTop()>0?($("header.desktop, header.mobile").addClass("fixed"),$("header.mobile").css("top","0px")):$(window).scrollTop()<1&&$("header.desktop").hasClass("fixed")&&$("header.desktop, header.mobile").removeClass("fixed")},Common.persistantSideBar=function(){var e=$(".content .more-news");if(e.length){var o=e.parent();if($(window).width()>769){if(e.outerHeight()<sideBarLimitFromTopEl.outerHeight()){var t=(e.outerWidth(),$(window).width()-(o.offset().left+o.outerWidth())),i=e.offset().top+e.outerHeight();if($(window).scrollTop()>sideBarFromTopOrigi-133){if(e.addClass("sticky"),e.css("width",e.parent().outerWidth()+"px"),e.css("right",t+"px"),o.css("height",o.prev().outerHeight()),i>=sideBarLimitFromTop&&(e.addClass("stop"),e.css("width",e.parent().outerWidth()+"px")),e.hasClass("stop")){e.css("width",e.parent().outerWidth()+"px");var s=e.offset().top-$(window).scrollTop();s>132&&e.removeClass("stop")}}else e.removeClass("sticky"),e.css("width","auto"),e.css("right","auto"),o.css("height","auto")}}else e.removeClass("sticky"),e.css("width","auto"),e.css("right","auto"),o.css("height","auto")}},Common.mobileMenu=function(){$(".menu-icon").toggleClass("open"),$(".mobile-navigation").toggleClass("open"),$("body").toggleClass("mobile-nav-open")},Common.mobileSubNav=function(e){$(this).hasClass("open")||(e.preventDefault(),$(this).toggleClass("open"),$(this).siblings(".sub").slideToggle(300))},Common.changeLanguage=function(e){e.preventDefault(),window.location=$(this).val()},Common.newsSquare=function(){$(window).width()>768?($(".news-grid.homepage .span3").css("height",$(".news-grid .span3").outerWidth()+"px"),$(".news-grid.homepage .span6").css("height",$(".news-grid .span6").outerWidth()/2+"px")):Common.equaliseHeights(".news-grid.homepage [class^=span]")},Common.subpagePod=function(){$(".subpage, .subpage .info, .staff, .staff .info").css("height","auto"),Common.equaliseHeights(".subpage, .staff"),$(".subpage, .staff").each(function(){var e=$(this),o=0;o=e.outerHeight()-e.children("a").outerHeight()-e.children(".info").outerHeight()+"px",e.find(".arrow-link").css("margin-top",o)})},Common.ShareProductImagePodCheck=function(){var e,o;return $(".product-image-pod").length>0&&(e=$(".product-image-pod"),o=e.prev(),o.hasClass("share-tools")&&o.css({"padding-bottom":"50px"}),void 0)},$(document).ready(function(){Common.hideValign(),Common.init()}),$(window).scroll(function(){Common.persistentNav(),Common.persistantSideBar(),$(".slider li").children(".video").length>=1&&($("body").scrollTop()>$(".slider").height()?$(".slider li video")[0].pause():$(".slider li video")[0].play())}),$(window).load(function(){Common.bindings(),Common.valign(),Common.PodValign(),$(window).width()>568&&Common.subpagePod(),blazy=new Blazy,$("header.desktop .search-form fieldset").append($(".autocomplete-suggestions").eq(0)),$("header.mobile .search-form fieldset").append($(".autocomplete-suggestions").eq(1))}),$(window).resize(function(){Common.newsSquare(),$(window).width()>568&&Common.subpagePod(),Common.persistantSideBar()});